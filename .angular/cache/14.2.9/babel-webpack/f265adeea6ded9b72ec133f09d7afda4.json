{"ast":null,"code":"import { MAT_DIALOG_DATA } from '@angular/material/dialog';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/material/dialog\";\nimport * as i2 from \"src/app/services/orders/orders.service\";\nimport * as i3 from \"@angular/material/snack-bar\";\n\nfunction OrderComponent_ng_container_1_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 5)(2, \"mat-icon\");\n    i0.ɵɵtext(3, \" check_circle \");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(4, \"div\", 6);\n    i0.ɵɵtext(5, \" Congratulations your order has been fulfilled. An email with your voucher has been sent to your email. \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"a\", 7);\n    i0.ɵɵtext(7, \" visit \");\n    i0.ɵɵelementStart(8, \"span\");\n    i0.ɵɵtext(9, \"www.perlego.com\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(10, \" to activate your voucher \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n}\n\nfunction OrderComponent_ng_container_1_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 8)(1, \"mat-icon\");\n    i0.ɵɵtext(2, \" cancel \");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(3, \"div\", 6);\n    i0.ɵɵtext(4, \" Your order could not be fulfilled due to an unsuccessful payment. \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"a\", 9);\n    i0.ɵɵtext(6, \" Click here to report if your payment was successful and you did not receive a voucher \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction OrderComponent_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, OrderComponent_ng_container_1_ng_container_1_Template, 11, 0, \"ng-container\", 1);\n    i0.ɵɵtemplate(2, OrderComponent_ng_container_1_ng_template_2_Template, 7, 0, \"ng-template\", null, 3, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵelementStart(4, \"button\", 4);\n    i0.ɵɵtext(5, \"Close\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const _r4 = i0.ɵɵreference(3);\n\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.success)(\"ngIfElse\", _r4);\n  }\n}\n\nfunction OrderComponent_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 10);\n    i0.ɵɵelement(1, \"div\")(2, \"div\")(3, \"div\")(4, \"div\")(5, \"div\")(6, \"div\")(7, \"div\")(8, \"div\")(9, \"div\")(10, \"div\")(11, \"div\")(12, \"div\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"p\");\n    i0.ɵɵtext(14, \"Processing order\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nexport let OrderComponent = /*#__PURE__*/(() => {\n  class OrderComponent {\n    constructor(dialogRef, data, orderSrvc, _snackBar) {\n      this.dialogRef = dialogRef;\n      this.data = data;\n      this.orderSrvc = orderSrvc;\n      this._snackBar = _snackBar;\n      this.loading = true;\n      this.success = null;\n      this.order = data['order'];\n      this.status = data['status'];\n      this.createOrder(this.status);\n    }\n\n    ngOnInit() {}\n\n    createOrder(payment) {\n      let order = this.order;\n      let id = this.order.orderId;\n\n      if (payment) {\n        delete order.createdAt;\n        delete order.updatedAt;\n        delete order.orderId;\n        delete order.totalAmount;\n        this.order.status = \"PAID\"; //this.alert('Payment successsful')\n\n        this.orderSrvc.updateOrder(id, order).then(resp => {\n          //  console.log(resp);\n          this.success = true;\n          this.loading = false;\n        }).catch(error => {\n          //console.log(error);\n          this.success = false;\n          this.loading = false;\n        });\n      } else {\n        this.success = false;\n        this.loading = false;\n      }\n    }\n\n    alert(msg) {\n      this._snackBar.open(msg, \"\", {\n        duration: 5000,\n        verticalPosition: 'top',\n        horizontalPosition: 'center',\n        panelClass: ['custom-snackbar']\n      });\n    }\n\n  }\n\n  OrderComponent.ɵfac = function OrderComponent_Factory(t) {\n    return new (t || OrderComponent)(i0.ɵɵdirectiveInject(i1.MatDialogRef), i0.ɵɵdirectiveInject(MAT_DIALOG_DATA), i0.ɵɵdirectiveInject(i2.OrdersService), i0.ɵɵdirectiveInject(i3.MatSnackBar));\n  };\n\n  OrderComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: OrderComponent,\n    selectors: [[\"app-order\"]],\n    decls: 4,\n    vars: 2,\n    consts: [[\"id\", \"container\"], [4, \"ngIf\", \"ngIfElse\"], [\"elseTemplate\", \"\"], [\"orderResponseTemplate\", \"\"], [\"mat-button\", \"\", \"mat-dialog-close\", \"\"], [1, \"icon\"], [\"id\", \"message\"], [\"target\", \"_blank\", \"href\", \"https://www.perlego.com/group-register?orgt1=FL4hZdQ7AEBEc3d0kwHHuA==\", 1, \"link\"], [1, \"icon\", \"red\"], [\"target\", \"_blank\", \"href\", \"mailto:perlego@tutenterprise.co.za\", 1, \"link\"], [1, \"lds-default\"]],\n    template: function OrderComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵtemplate(1, OrderComponent_ng_container_1_Template, 6, 2, \"ng-container\", 1);\n        i0.ɵɵtemplate(2, OrderComponent_ng_template_2_Template, 15, 0, \"ng-template\", null, 2, i0.ɵɵtemplateRefExtractor);\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        const _r1 = i0.ɵɵreference(3);\n\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", !ctx.loading)(\"ngIfElse\", _r1);\n      }\n    },\n    styles: [\"#container[_ngcontent-%COMP%]{width:300px;display:flex;flex-direction:column;justify-content:center;align-items:center;padding:40px}#container[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{display:block;height:120px;width:120px;font-size:120px;-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-image:-webkit-linear-gradient(120deg,#84fab0 0%,#8fd3f4 100%)}#container[_ngcontent-%COMP%]   .red[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-image:-webkit-linear-gradient(120deg,#fa8484 0%,#f48fb9 100%)}#container[_ngcontent-%COMP%]   #message[_ngcontent-%COMP%]{margin:20px 0;font-weight:700;text-align:center}#container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:link, #container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:visited{text-decoration:none;text-align:center;font-weight:700;color:#2b2d42;margin-bottom:35px}#container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:link   span[_ngcontent-%COMP%], #container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:visited   span[_ngcontent-%COMP%]{text-decoration:underline;color:#fca311}\"]\n  });\n  return OrderComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}